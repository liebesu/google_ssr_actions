# SerpAPI密钥注册日期配置指南

## 📋 概述

为了准确计算每个SerpAPI账户的下次重置时间，需要配置每个API密钥的注册日期。重置时间基于注册日期的每月对应日计算。

## 🔧 配置步骤

### 1. 编辑配置文件

编辑 `api_key_registration_dates.json` 文件，将示例密钥替换为您的实际API密钥：

```json
{
  "key_registration_dates": {
    "您的第一个API密钥": "2024-01-15",
    "您的第二个API密钥": "2024-03-20",
    "您的第三个API密钥": "2024-06-10",
    "您的第四个API密钥": "2024-09-05"
  }
}
```

### 2. 获取注册日期

如果您不确定API密钥的注册日期，可以通过以下方式获取：

1. **查看SerpAPI账户邮件**：注册时收到的确认邮件
2. **登录SerpAPI控制台**：查看账户信息
3. **联系SerpAPI支持**：请求提供注册日期信息
4. **估算日期**：如果无法确定，可以估算一个大概的日期

### 3. 日期格式要求

- 格式：`YYYY-MM-DD`
- 示例：`2024-01-15`、`2024-03-20`
- 必须是有效的日期

## 📊 重置时间计算逻辑

### 基于注册日期的计算

| 注册日期 | 当前时间 | 下次重置时间 | 说明 |
|---------|---------|-------------|------|
| 2024-01-15 | 2025-09-15 | 2025-10-15 | 每月15日重置 |
| 2024-03-20 | 2025-09-15 | 2025-10-20 | 每月20日重置 |
| 2024-06-10 | 2025-09-15 | 2025-10-10 | 每月10日重置 |
| 2024-09-05 | 2025-09-15 | 2025-10-05 | 每月5日重置 |

### 特殊情况处理

1. **跨年处理**：如果当前是12月，重置时间计算到下年
2. **已过重置时间**：如果计算出的重置时间已过，使用下下个月
3. **2月29日**：自动调整为2月最后一天

## 🎯 钉钉通知效果

配置完成后，钉钉通知将显示：

```
🔑 各密钥使用情况
• 密钥1: 50/250 (20.0% 已用) - ✅ 正常使用
  📅 下次重置: 2025-10-15
• 密钥2: 100/250 (40.0% 已用) - ✅ 正常使用
  📅 下次重置: 2025-10-20
• 密钥3: 200/500 (40.0% 已用) - ✅ 正常使用
  📅 下次重置: 2025-10-10
• 密钥4: 150/1000 (15.0% 已用) - ✅ 正常使用
  📅 下次重置: 2025-10-05
```

## ⚠️ 注意事项

1. **安全性**：配置文件包含API密钥，请确保文件权限安全
2. **备份**：建议备份配置文件
3. **更新**：添加新密钥时记得更新配置文件
4. **验证**：配置完成后可以运行测试脚本验证

## 🧪 测试验证

运行测试脚本验证配置：

```bash
python test_accurate_reset_date.py
```

这将显示每个密钥的计算结果，确认重置时间是否正确。


