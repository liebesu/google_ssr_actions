<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è°ƒè¯•é¡µé¢ - æ£€æŸ¥é¡µé¢æ˜¾ç¤ºé—®é¢˜</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: #0f172a; 
            color: #e5e7eb; 
            line-height: 1.6;
        }
        .debug-section { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #1f2937; 
            border-radius: 8px; 
            background: #0b1220;
        }
        .status { 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 5px; 
        }
        .success { background: #10b981; }
        .error { background: #ef4444; }
        .warning { background: #f59e0b; }
        .info { background: #3b82f6; }
        button { 
            padding: 10px 15px; 
            margin: 5px; 
            border: none; 
            border-radius: 5px; 
            background: #3b82f6; 
            color: white; 
            cursor: pointer; 
        }
        .hidden { display: none !important; }
        .visible { display: block !important; }
    </style>
</head>
<body>
    <h1>ğŸ” é¡µé¢æ˜¾ç¤ºé—®é¢˜è°ƒè¯•</h1>
    
    <div class="debug-section">
        <h3>1. åŸºæœ¬é¡µé¢æµ‹è¯•</h3>
        <div id="basic-test" class="status info">
            âœ… å¦‚æœä½ èƒ½çœ‹åˆ°è¿™ä¸ªé¡µé¢ï¼Œè¯´æ˜HTMLå’ŒCSSéƒ½èƒ½æ­£å¸¸åŠ è½½
        </div>
    </div>
    
    <div class="debug-section">
        <h3>2. JavaScriptæ‰§è¡Œæµ‹è¯•</h3>
        <div id="js-test" class="status warning">â³ æ£€æµ‹JavaScriptæ‰§è¡Œ...</div>
    </div>
    
    <div class="debug-section">
        <h3>3. DOMæ“ä½œæµ‹è¯•</h3>
        <div id="dom-test" class="status warning">â³ æ£€æµ‹DOMæ“ä½œ...</div>
        <div id="test-element" class="hidden">ğŸ‰ DOMæ“ä½œæ­£å¸¸ï¼</div>
    </div>
    
    <div class="debug-section">
        <h3>4. localStorageæµ‹è¯•</h3>
        <div id="storage-test" class="status warning">â³ æ£€æµ‹localStorage...</div>
    </div>
    
    <div class="debug-section">
        <h3>5. è®¤è¯é€»è¾‘æµ‹è¯•</h3>
        <div id="auth-test" class="status warning">â³ æ£€æµ‹è®¤è¯é€»è¾‘...</div>
        <button onclick="testAuth()">æµ‹è¯•è®¤è¯</button>
        <button onclick="clearStorage()">æ¸…é™¤å­˜å‚¨</button>
    </div>
    
    <div class="debug-section">
        <h3>6. é¡µé¢éšè—/æ˜¾ç¤ºæµ‹è¯•</h3>
        <div id="visibility-test" class="status warning">â³ æ£€æµ‹é¡µé¢å¯è§æ€§...</div>
        <button onclick="hideShow()">éšè—/æ˜¾ç¤ºæµ‹è¯•</button>
    </div>

    <script>
        console.log('ğŸ” è°ƒè¯•é¡µé¢å¼€å§‹æ‰§è¡Œ...');
        
        // 1. JavaScriptæ‰§è¡Œæµ‹è¯•
        document.getElementById('js-test').className = 'status success';
        document.getElementById('js-test').textContent = 'âœ… JavaScriptæ‰§è¡Œæ­£å¸¸';
        
        // 2. DOMæ“ä½œæµ‹è¯•
        try {
            document.getElementById('test-element').className = 'visible';
            document.getElementById('dom-test').className = 'status success';
            document.getElementById('dom-test').textContent = 'âœ… DOMæ“ä½œæ­£å¸¸';
        } catch(e) {
            document.getElementById('dom-test').className = 'status error';
            document.getElementById('dom-test').textContent = 'âŒ DOMæ“ä½œå¤±è´¥: ' + e.message;
        }
        
        // 3. localStorageæµ‹è¯•
        try {
            localStorage.setItem('test', 'value');
            const value = localStorage.getItem('test');
            if (value === 'value') {
                document.getElementById('storage-test').className = 'status success';
                document.getElementById('storage-test').textContent = 'âœ… localStorageæ­£å¸¸';
            } else {
                throw new Error('è¯»å–å€¼ä¸åŒ¹é…');
            }
            localStorage.removeItem('test');
        } catch(e) {
            document.getElementById('storage-test').className = 'status error';
            document.getElementById('storage-test').textContent = 'âŒ localStorageå¤±è´¥: ' + e.message;
        }
        
        // 4. è®¤è¯é€»è¾‘æµ‹è¯•
        const AUTH_HASH = "37092303178fc51f57a52ea39e166a4954ec86c075de3a9df7a221c9ef7e0891";
        const AUTH_USER = "liebesu";
        
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }
        
        try {
            document.getElementById('auth-test').className = 'status success';
            document.getElementById('auth-test').innerHTML = `
                âœ… è®¤è¯å˜é‡åŠ è½½æ­£å¸¸<br>
                ç”¨æˆ·å: ${AUTH_USER}<br>
                å“ˆå¸Œå€¼: ${AUTH_HASH.substring(0, 20)}...
            `;
        } catch(e) {
            document.getElementById('auth-test').className = 'status error';
            document.getElementById('auth-test').textContent = 'âŒ è®¤è¯å˜é‡å¤±è´¥: ' + e.message;
        }
        
        // 5. é¡µé¢å¯è§æ€§æµ‹è¯•
        document.getElementById('visibility-test').className = 'status success';
        document.getElementById('visibility-test').innerHTML = `
            âœ… é¡µé¢å¯è§æ€§æ­£å¸¸<br>
            æ–‡æ¡£æ˜¾ç¤ºçŠ¶æ€: ${document.documentElement.style.display || 'é»˜è®¤'}<br>
            é¡µé¢å¯è§æ€§: ${document.visibilityState}
        `;
        
        function testAuth() {
            const storedAuth = localStorage.getItem('gauth');
            const storedUser = localStorage.getItem('guser');
            
            alert(`å­˜å‚¨çš„è®¤è¯ä¿¡æ¯:\nç”¨æˆ·: ${storedUser || 'æ— '}\nè®¤è¯: ${storedAuth ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨'}`);
        }
        
        function clearStorage() {
            localStorage.removeItem('gauth');
            localStorage.removeItem('guser');
            alert('localStorageå·²æ¸…é™¤');
        }
        
        function hideShow() {
            const currentDisplay = document.documentElement.style.display;
            if (currentDisplay === 'none') {
                document.documentElement.style.display = '';
                console.log('é¡µé¢å·²æ˜¾ç¤º');
            } else {
                document.documentElement.style.display = 'none';
                console.log('é¡µé¢å·²éšè—');
            }
        }
        
        console.log('ğŸ‰ è°ƒè¯•é¡µé¢æ‰§è¡Œå®Œæˆ');
    </script>
</body>
</html>

