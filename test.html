<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯•é¡µé¢</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background: #0f172a; 
            color: #e5e7eb; 
            margin: 0; 
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: #1f2937;
            padding: 20px;
            border-radius: 10px;
        }
        .auth-box {
            background: #374151;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        input, button {
            padding: 10px;
            margin: 5px;
            border-radius: 5px;
            border: 1px solid #6b7280;
            background: #1f2937;
            color: #e5e7eb;
        }
        button {
            background: #3b82f6;
            cursor: pointer;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { background: #10b981; }
        .error { background: #ef4444; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” é¡µé¢æ˜¾ç¤ºæµ‹è¯•</h1>
        
        <div id="status" class="status success">
            âœ… å¦‚æœä½ èƒ½çœ‹åˆ°è¿™ä¸ªé¡µé¢ï¼Œè¯´æ˜åŸºæœ¬HTML/CSSéƒ½æ­£å¸¸
        </div>
        
        <div class="auth-box">
            <h3>è®¤è¯æµ‹è¯•</h3>
            <p>ç”¨æˆ·å: liebesu</p>
            <p>éœ€è¦çš„å¯†ç å“ˆå¸Œ: 37092303...ï¼ˆå‚è€ƒä¸»é¡µé¢è°ƒè¯•ä¿¡æ¯ï¼‰</p>
            
            <input type="text" id="username" placeholder="ç”¨æˆ·å" value="liebesu">
            <input type="password" id="password" placeholder="å¯†ç ">
            <button onclick="testAuth()">æµ‹è¯•è®¤è¯</button>
            
            <div id="result" class="status" style="background: #374151;">ç­‰å¾…æµ‹è¯•...</div>
        </div>
        
        <div class="auth-box">
            <h3>é¡µé¢éšè—/æ˜¾ç¤ºæµ‹è¯•</h3>
            <button onclick="hidePage()">éšè—é¡µé¢</button>
            <button onclick="showPage()">æ˜¾ç¤ºé¡µé¢</button>
            <button onclick="testShowAuth()">æµ‹è¯•æ˜¾ç¤ºè®¤è¯æ¡†</button>
        </div>
        
        <div id="auth-mask" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center;">
            <div style="background: #1f2937; padding: 20px; border-radius: 10px; width: 300px;">
                <h3>æ¨¡æ‹Ÿè®¤è¯æ¡†</h3>
                <p>è¿™æ˜¯æ¨¡æ‹Ÿçš„è®¤è¯æ¡†</p>
                <button onclick="closeAuth()">å…³é—­</button>
            </div>
        </div>
    </div>

    <script>
        console.log('ğŸ” æµ‹è¯•é¡µé¢å¼€å§‹æ‰§è¡Œ...');
        
        const AUTH_HASH = "37092303178fc51f57a52ea39e166a4954ec86c075de3a9df7a221c9ef7e0891";
        const AUTH_USER = "liebesu";
        
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
        }
        
        async function testAuth() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const result = document.getElementById('result');
            
            if (!password) {
                result.className = 'status error';
                result.textContent = 'è¯·è¾“å…¥å¯†ç ';
                return;
            }
            
            try {
                const hash = await sha256(password);
                const userOk = username === AUTH_USER;
                const passOk = hash.toLowerCase() === AUTH_HASH.toLowerCase();
                
                if (userOk && passOk) {
                    result.className = 'status success';
                    result.innerHTML = `âœ… è®¤è¯æˆåŠŸï¼<br>ç”¨æˆ·å: ${username}<br>å¯†ç å“ˆå¸Œ: ${hash}`;
                    
                    // æ¨¡æ‹Ÿä¿å­˜åˆ°localStorage
                    localStorage.setItem('gauth', hash);
                    localStorage.setItem('guser', username);
                } else {
                    result.className = 'status error';
                    result.innerHTML = `âŒ è®¤è¯å¤±è´¥<br>ç”¨æˆ·åéªŒè¯: ${userOk ? 'âœ…' : 'âŒ'}<br>å¯†ç éªŒè¯: ${passOk ? 'âœ…' : 'âŒ'}<br>è®¡ç®—å“ˆå¸Œ: ${hash}`;
                }
            } catch(e) {
                result.className = 'status error';
                result.textContent = 'è®¤è¯è¿‡ç¨‹å‡ºé”™: ' + e.message;
            }
        }
        
        function hidePage() {
            document.documentElement.style.display = 'none';
            console.log('é¡µé¢å·²éšè—');
        }
        
        function showPage() {
            document.documentElement.style.display = '';
            console.log('é¡µé¢å·²æ˜¾ç¤º');
        }
        
        function testShowAuth() {
            document.getElementById('auth-mask').style.display = 'flex';
            console.log('è®¤è¯æ¡†å·²æ˜¾ç¤º');
        }
        
        function closeAuth() {
            document.getElementById('auth-mask').style.display = 'none';
            console.log('è®¤è¯æ¡†å·²å…³é—­');
        }
        
        // æ£€æŸ¥localStorageä¸­çš„è®¤è¯ä¿¡æ¯
        window.onload = function() {
            const storedAuth = localStorage.getItem('gauth');
            const storedUser = localStorage.getItem('guser');
            
            if (storedAuth && storedUser) {
                console.log('å‘ç°å­˜å‚¨çš„è®¤è¯ä¿¡æ¯:', { user: storedUser, auth: storedAuth.substring(0, 10) + '...' });
            } else {
                console.log('æ²¡æœ‰å­˜å‚¨çš„è®¤è¯ä¿¡æ¯');
            }
        };
        
        console.log('ğŸ‰ æµ‹è¯•é¡µé¢æ‰§è¡Œå®Œæˆ');
    </script>
</body>
</html>

